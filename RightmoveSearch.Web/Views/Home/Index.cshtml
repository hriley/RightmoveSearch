@model RightmoveSearch.Web.Models.HomeViewModel

@{
    ViewBag.Title = "Home Page";
}

<p>Search for properties in need of modernisation:</p>
@using (Html.BeginForm())
{
    <ul id="search-form">
        <li>
            @Html.LabelFor(x => x.MinPrice)
            @Html.TextBoxFor(x => x.MinPrice)
            @Html.ValidationMessageFor(x => x.MinPrice)
        </li>
        <li>
            @Html.LabelFor(x => x.MaxPrice)
            @Html.TextBoxFor(x => x.MaxPrice)
            @Html.ValidationMessageFor(x => x.MaxPrice)
        </li>
        <li>
            @Html.LabelFor(x => x.MaxDaysSinceAdded)
            @Html.DropDownListFor(model => model.MaxDaysSinceAdded, new SelectList(new string[] {"1", "3", "7", "14"}, Model.MaxDaysSinceAdded))
            @Html.ValidationMessageFor(x => x.MaxDaysSinceAdded)
        </li>
        <li>
            @Html.LabelFor(x => x.Radius)
            @Html.TextBoxFor(x => x.Radius)
            @Html.ValidationMessageFor(x => x.Radius)
        </li>
        <li>
            <input type="submit" value="Search" />
        </li>
    </ul>
}

@if(Model.Result != null) {
    <p>Your search matched <strong>@Model.Result.Results.Count()</strong> properties from a total of <strong>@Model.Result.PropertiesFound</strong> in <strong>@Model.Duration</strong> seconds</p>
    <table cellpadding="3" border="1">
        <thead>
            <tr>
                <th>Date Added</th>
                <th>Address</th>
            </tr>
        </thead>
        @foreach (var result in Model.Result.Results)
        {
            <tr>
                <td>@result.DateAdded.ToString("dd/MM/yyyy")</td>
                <td>
                    <a href="@string.Format("http://www.rightmove.co.uk{0}", @result.Link)" target="_blank">@result.Address</a>
                </td>
            </tr>
        }
    </table>
}